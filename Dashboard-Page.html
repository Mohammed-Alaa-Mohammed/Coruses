<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="dash-page.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courses Page</title>
    
    <!-- Ø¥Ø¶Ø§ÙØ© Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="light-mode">

    <div class="header">
        <h1>Courses</h1>
        <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ™</button>
    </div>

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø© -->
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒÙˆØ±Ø³..." oninput="filterCourses()">
        <select id="filterSelect" onchange="filterCourses()" style="width:190px;">
            <option value="all">Ø§Ù„ÙƒÙ„</option>
            <option value="free">Ù…Ø¬Ø§Ù†ÙŠ</option>
            <option value="paid">Ù…Ø¯ÙÙˆØ¹</option>
        </select>
    </div>

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª -->
    <div class="course-container" id="courseList">
        <!-- Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§ Ù‡Ù†Ø§ -->
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Bootstrap -->
    <div class="modal fade" id="courseModal" tabindex="-1" aria-labelledby="courseModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="courseModalLabel">ØªØ£ÙƒÙŠØ¯ Ø¨Ø¯Ø¡ Ø§Ù„ÙƒÙˆØ±Ø³</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¨Ø¯Ø¡ Ø§Ù„ÙƒÙˆØ±Ø³ØŸ
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="button" class="btn btn-primary" id="confirmButton">Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙƒÙˆØ±Ø³</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª Ù…Ù† localStorage ÙˆØ¹Ø±Ø¶Ù‡Ø§
        function loadCourses(filteredCourses = null) {
            const courses = filteredCourses || JSON.parse(localStorage.getItem('courses')) || [];
            const courseContainer = document.getElementById('courseList');
            courseContainer.innerHTML = '';

            courses.forEach((course, index) => {
                const courseElement = document.createElement('div');
                courseElement.classList.add('course');
                const buttonText = course.isPaid ? 'Ø¥Ø´ØªØ±Ùƒ Ø§Ù„Ø¢Ù†' : 'Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†';
                const buttonClass = course.isPaid ? 'subscribe' : 'start';

                courseElement.innerHTML = `
                    <h2>${course.title}</h2>
                    <p>${course.description}</p>
                    ${course.isPaid ? `<p>Ø§Ù„Ø³Ø¹Ø±: ${course.price} Ø±ÙŠØ§Ù„</p>` : ''}
                    <p>Ø§Ù„Ù…Ù‚Ø¯Ù…: ${course.instructor}</p>
                    <p>Ø¹Ø¯Ø¯ Ø§Ù„Ø¯Ø±ÙˆØ³: ${course.lessons}</p>
                    <button class="${buttonClass}" data-title="${course.title}" data-link="${course.link}" data-bs-toggle="modal" data-bs-target="#courseModal">${buttonText}</button>
                `;
                courseContainer.appendChild(courseElement);
            });

            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ù„Ù„Ø£Ø²Ø±Ø§Ø±
            document.querySelectorAll('.start').forEach(button => {
                button.addEventListener('click', (event) => {
                    const courseLink = event.target.getAttribute('data-link');
                    showCourseModal(courseLink);
                });
            });
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯
        function showCourseModal(courseLink) {
            const confirmButton = document.getElementById('confirmButton');
            confirmButton.onclick = function () {
                window.location.href = courseLink; // Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø­Ø¯Ø¯
            };
        }

        // ÙÙ„ØªØ±Ø© Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø§Ø®ØªÙŠØ§Ø±
        function filterCourses() {
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            const filterSelect = document.getElementById('filterSelect').value;

            const courses = JSON.parse(localStorage.getItem('courses')) || [];
            const filteredCourses = courses.filter(course => {
                const matchesSearch = course.title.toLowerCase().includes(searchInput) ||
                                      course.description.toLowerCase().includes(searchInput);
                const matchesFilter = 
                    filterSelect === 'all' ||
                    (filterSelect === 'free' && !course.isPaid) ||
                    (filterSelect === 'paid' && course.isPaid);
                return matchesSearch && matchesFilter;
            });

            loadCourses(filteredCourses);
        }

        // ØªØºÙŠÙŠØ± ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø© ÙˆØ§Ù„Ø¸Ù„Ø§Ù…
        function toggleTheme() {
            const body = document.body;
            const currentMode = body.classList.contains('light-mode') ? 'light' : 'dark';
            body.classList.remove(`${currentMode}-mode`);
            body.classList.add(`${currentMode === 'light' ? 'dark' : 'light'}-mode`);
            document.querySelector('.theme-toggle').textContent = currentMode === 'light' ? 'â˜€ï¸' : 'ğŸŒ™';
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        window.onload = () => {
            loadCourses();
        };
    </script>

    <!-- Ø¥Ø¶Ø§ÙØ© Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>